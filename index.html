<!--
@license
Copyright (c) 2019 The Contrast Tool Authors. All rights reserved.
This code may only be used under the BSD style license found at https://contrast-tool.github.io/docs/LICENSE.md
The complete set of authors may be found at https://contrast-tool.github.io/docs/AUTHORS.md
The complete set of contributors may be found at https://contrast-tool.github.io/docs/CONTRIBUTORS.md
-->

<!doctype html>
<html lang="en-NL" dir="ltr">

<head>
	<base href="/">
	<title>Contrast Tool</title>
	
	<meta name="description" content="An interactive viewer to compare and export your web graphics.">
	<meta name="author" content="Rikkun Brouwers">
	
	<meta charset="utf-8">
	<meta name="google" content="notranslate">
	<meta name="google-site-verification" content="d0XZavN80gjJJtY4t5AKzcm3PfXBsLIM_7MTepJaI0c" />
	
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	
	<script>
		self.applic = new class { constructor() {
			this.__proto__.rootPath = '/';
			this.__proto__.created = Date.now();
			this.__proto__.rendered = false;
		}};
	</script>
	
	<meta itemprop="name" content="Contrast Tool">
	<meta itemprop="description" content="An interactive viewer to compare and export your web graphics.">
	<meta itemprop="image" content="https://contrast-tool.github.io/images/share.png">
	
	<meta name="theme-color" content="#2C2F33">
	<link rel="manifest" href="manifest.json">
	
	<meta property="og:type" content="website">
	<meta property="og:title" content="Contrast Tool">
	<meta property="og:image" content="https://contrast-tool.github.io/images/share.png">
	<meta property="og:description" content="An interactive viewer to compare and export your web graphics.">
	<meta property="og:site_name" content="Contrast Tool">
	<meta property="og:url" content="https://contrast-tool.github.io/">
	
	<meta name="twitter:card" content="summary_large_image">
	
	<link rel="icon" type="image/x-icon" href="images/favicon.ico">
	<link rel="icon" sizes="192x192" href="images/manifest/icon-192x192.png">
	<link rel="shortcut icon" href="images/manifest/icon-72x72.png">
	<link rel="apple-touch-icon" href="images/manifest/icon-72x72.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/manifest/icon-72x72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="images/manifest/icon-144x144.png">
	<link rel="apple-touch-icon" sizes="180x180" href="images/manifest/icon-180x180.png">
	
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500|Material+Icons+Sharp">
	<style> body { margin: 0; background: #f4f4f4; } </style>
	
	<script>
		// A2HS - https://developers.google.com/web/fundamentals/app-install-banners/
		if (window.navigator.standalone === true || window.matchMedia('(display-mode: standalone)').matches) { 
			console.info('A2HS is active'); 
		} else {
			self.addEventListener('beforeinstallprompt', (_event) => {
				applic.deferredPrompt = _event;  console.info('A2HS is available');
				applic.deferredPrompt.preventDefault();

				applic.deferredInstall = () => {
					if (!applic.deferredPrompt) return;

					applic.deferredPrompt.prompt().catch((_error) => console.error );
					applic.deferredPrompt.userChoice.then((_result) => {
						if (_result.outcome === 'accepted') {
							console.debug('User accepted the A2HS prompt');
						} else {
							console.debug('User dismissed the A2HS prompt');
						};

						applic.utils.buffer(() => {
							applic.deferredPrompt = null;
							applic.deferredInstall = () => { };
						})
					});
				};

				// TODO: Add an in-app install prompt.
				setTimeout(applic.deferredInstall, 1000 * 2)
			});
		}

		// ServiceWorker
		if ('serviceWorker' in navigator) {
			self.addEventListener('load', () => {	
				navigator.serviceWorker.register('service-worker.js', { scope: applic.rootPath })
					.then((_sw) => { applic.__proto__.sw = _sw})
			});
		};

	</script>

	<script src="node_modules/@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>

	<script>
		self.applic = new class { constructor() {
			this.__proto__.rootPath = '/';
			this.__proto__.created = Date.now();
			this.__proto__.rendered = false;
		}};
	</script>
	
	<script type="module" src="src/applic.wireframe.js"></script>
	<script type="module" src="src/applic.js"></script>
	<script type="module" src="src/applic.lazies.js"></script>

</head>

<body>
	<applic-mount></applic-mount>
	<noscript>Please enable JavaScript to view this application.</noscript>

	<script>
		requestAnimationFrame(() => { self.applic.__proto__.rendered = true; });
		requestAnimationFrame(() => { console.debug('--- first frame ---'); });
	</script>
</body>

</html>